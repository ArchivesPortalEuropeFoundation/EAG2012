<?xml version="1.0" encoding="UTF-8"?>
<!--
    Draft EAG 3.0 Schema
    Version: 0.1
    Date: 20200821
    Editor: Archives Portal Europe Foundation, Working Group on Standards
-->
<!--
    Change log:

    - Reviewed schema with regard to TS-EAS' decision on using camelCase spelling for element and attribute names; changed names where required 
      (comments included, marked "Review notes")
    - Reviewed schema with regard to alignment that TS-EAS aims for concerning EAC-CPF and EAD, where it could make sense to have EAG follow this approach
    - Reviewed schema with regard to changes and elements used in EAC-CPF where it could make sense to adopt these for EAG (e.g. "nameEntry" instead of
      "autform", "parform" and "nonpreform" or looking at the remodelling of "relations") 
    - Added change for "repositoryType" according to EAG2012 issue #33 on GitHub (https://github.com/ArchivesPortalEuropeFoundation/EAG2012/issues/33) as 
      well as alternative approach when following EAC-CPF and its handling of "entityType" and "otherEntityType"-s
    - Added "list" as an option to "repositoryHistory" (renamed "repositorhist") and to "holdings" as per EAG2012 issues #25 and #26 on GitHub 
      (https://github.com/ArchivesPortalEuropeFoundation/EAG2012/issues/25 and https://github.com/ArchivesPortalEuropeFoundation/EAG2012/issues/26)
      - This is following the suggestion to change from "adminhierarchy" to using "structureOrGenealogy" as in EAC-CPF, which also includes "list" as
        an option
    - Added controlled access terms option to "holdings" according to EAG2012 issue #1 on GitHub 
      (https://github.com/ArchivesPortalEuropeFoundation/EAG2012/issues/1)
-->
<xs:schema xmlns="http://www.archivesportaleurope.net/Portal/profiles/eag3.0/"
    targetNamespace="http://www.archivesportaleurope.net/Portal/profiles/eag3.0/"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xs:import namespace="http://www.w3.org/XML/1998/namespace"
        schemaLocation="http://www.w3.org/2007/08/xml.xsd"/>
    <!-- Updated namespace information to reflect the new version -->

    <xs:element name="eag">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="control" type="control"/>
                <xs:element name="archivalGuide" type="archivalGuide"/>
                <!-- Following the camelCase approach, which would enable EAG to be consistent in a new version, the element "archguide" would 
                be renamed "archGuide". If we do that, we might want to consider renaming it "archivalGuide" in order to also resolve the abbreviated 
                name. -->
                <!-- <xs:element name="relations" type="relations" minOccurs="0"/> -->
                <!-- EAC-CPF and EAD3 both have the "relations" element within their descriptive sections, EAC-CPF as part of "cpfDescription" and EAD3
                as a sibling element to "did" for "archdesc" and "c". It would make sense, if EAG followed that approach and made "relations" a sub-element
                of "archivalGuide". -->
            </xs:sequence>
            <!-- <xs:attribute name="audience" use="required"> 
                <xs:simpleType>
                    <xs:restriction base="xs:token">
                        <xs:enumeration value="external"/>
                        <xs:enumeration value="internal"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:attribute> -->
            <!-- EAC-CPF intends to follow EAD3 with regard to the use of "audience", i.e. having it available as optional with all elements. 
                 If EAG were to fall in line with that, would we consider making "audience" optional here as well for EAG 3.0 in general?
                 We could still make it required for apeEAG if necessary. -->    
            <!-- EAC-CPF and EAD3 both include an option to identify each element within an EAS instance via the attribute "xml:id" respectively "id". 
                 Hence added this to all EAG elements as well. The intent for EAC-CPF is to have "audience" and "(xml:)id" as basic attributes with all 
                 elements. -->
            <xs:attribute ref="xml:base"/>
            <!-- <xs:attribute ref="xml:lang"/> -->
            <!-- EAC-CPF will follow EAD3 and add language attribution to all non-empty elements. -->
            <!-- The conversation around keeping or removing the XML namespace is still not finalised yet in the context of the EAC-CPF revision, so
                 leaving this with "xml:lang" (and "script"). Otherwise, this would (likely) become "languageOfElement" (and "scriptOfElement"). -->
           <xs:attributeGroup ref="common"/>
        </xs:complexType>
    </xs:element>

    <!-- Added -->
    <xs:attributeGroup name="common.empty">
       <xs:attribute ref="xml:id"/>
       <xs:attribute name="audience">
          <xs:simpleType>
             <xs:restriction base="xs:token">
                <xs:enumeration value="external"/>
                <xs:enumeration value="internal"/>
             </xs:restriction>
          </xs:simpleType>
       </xs:attribute>
    </xs:attributeGroup>

    <!-- Added -->
    <xs:attributeGroup name="common">
       <xs:attributeGroup ref="common.empty"/>
       <xs:attribute ref="xml:lang"/>
       <xs:attribute name="script" type="xs:NMTOKEN"/>
    </xs:attributeGroup>
    
    <!-- <xs:attributeGroup name="href">
        <xs:attribute name="href" type="xs:anyURI"/>
    </xs:attributeGroup>
    
    <xs:attributeGroup name="linkTitle">
        <xs:attribute name="linkTitle" type="xs:token"/>
    </xs:attributeGroup> -->
    
    <!-- The following group replaces the above two attributes. --> 
    <!-- EAC-CPF and EAD3 both use a group of linking attributes together with "href". As of today (21 August 2020), it is likely that this group will
         consist of the three attributes given here, but will not include "actuate", "arcRole", and "show" anymore. -->
    <xs:attributeGroup name="link">
        <xs:attribute name="href" type="xs:anyURI"/>
        <xs:attribute name="linkRole" type="xs:anyURI"/>
        <xs:attribute name="linkTitle" type="xs:token"/>
    </xs:attributeGroup>
    
    <!-- EAC-CPF revision suggests the addition of three optional attributes to those elements the content of which can be represented as a URI,
         respectively is likely taken from a vocabulary, ontology, thesaurus etc. (schema definition for new EAC-CPF not yet available) --> 
    <xs:attributeGroup name="vocabulary">
        <xs:attribute name="vocabularySource" type="xs:token"/>
        <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
        <xs:attribute name="valueURI" type="xs:anyURI"/>
    </xs:attributeGroup>
    
    <!-- EAC-CPF revision suggests the addition of three optional attributes to elements in the description part that will allow to point to 
         conventions and rules (in "conventionDeclaration"), to sources (in "source"), and to agents and dates of maintenance (in "maintenanceEvent"). 
         These will take the form of IDREF-s and will be linked via the "(xml:)id" of the appropriate elements. (schema definition for new EAC-CPF 
         not yet available)--> 
    <xs:attributeGroup name="references">
        <xs:attribute name="conventionDeclarationReference" type="xs:IDREF"/>
        <xs:attribute name="sourceReference" type="xs:IDREF"/>
        <xs:attribute name="maintenanceEventReference" type="xs:IDREF"/>
        <!-- potential addition <xs:attribute name="localTypeDeclarationReference" type="xs:IDREF"/> -->
    </xs:attributeGroup>
    
    <!-- ###############
       CONTROL
   ################ -->

    <xs:complexType name="control">
        <xs:sequence>
            <xs:element name="recordId" type="recordId"/>
            <xs:element name="otherRecordId" type="otherRecordId" minOccurs="0"
                maxOccurs="unbounded"/>
            <xs:element name="representation" type="representation"/>
            <!-- EAC-CPF intends to adopt this element from EAD3, hence it would make sense to have it added to EAG, too. -->
            <xs:element name="maintenanceStatus" type="maintenanceStatus"/>
            <xs:element name="publicationStatus" type="publicationStatus" minOccurs="0"/>
            <xs:element name="maintenanceAgency" type="maintenanceAgency"/>
            <!-- <xs:element name="languageDeclarations" type="languageDeclarations" minOccurs="0"/> -->
            <xs:element name="languageDeclaration" type="languageDeclaration" minOccurs="0" maxOccurs="unbounded"/>
            <!-- EAC-CPF and EAD3 both use "languageDeclaration" in the same way as "conventionDeclaration", i.e. without a plural wrapper element
                 and as repeatable directly within "control" -->
            <xs:element name="conventionDeclaration" type="conventionDeclaration" minOccurs="0"
                maxOccurs="unbounded"/>
            <xs:element name="rightsDeclaration" type="rightsDeclaration" minOccurs="0"
                maxOccurs="unbounded"/>
            <xs:element name="localTypeDeclaration" type="localTypeDeclaration" minOccurs="0"
                maxOccurs="unbounded"/>
            <xs:element name="localControl" type="localControl" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="maintenanceHistory" type="maintenanceHistory"/>
            <xs:element name="sources" type="sources" minOccurs="0"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <!-- EAC-CPF intends to add the "encoding" attributes to control that provide references to the usual ISO standards. EAG could hence do this 
             as well, which would remove the automatically created "conventionDeclaration"-s in the context of APE. -->
        <xs:attribute name="languageEncoding">
        <!-- The attribute in EAD3 is currently called "langencoding", but will be renamed "languageEncoding" in future. -->    
           <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="iso639-1"/>
                 <xs:enumeration value="iso639-2b"/>
                 <xs:enumeration value="iso639-3"/>
                 <xs:enumeration value="iana"/>
                 <!-- TS-EAS has decided that the IANA registry would be added as a fourth option. -->
                 <xs:enumeration value="otherLanguageEncoding"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="scriptEncoding">
           <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="iso15924"/>
                 <xs:enumeration value="otherScriptEncoding"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="dateEncoding">
           <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="iso8601"/>
                 <xs:enumeration value="otherDateEncoding"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="countryEncoding">
           <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="iso3166-1"/>
                 <xs:enumeration value="otherCountryEncoding"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="repositoryEncoding">
           <xs:simpleType>
             <xs:restriction base="xs:token">
                <xs:enumeration value="iso15511"/>
                <xs:enumeration value="otherRepositoryEncoding"/>
             </xs:restriction>
           </xs:simpleType>
       </xs:attribute>
    </xs:complexType>

    <!-- <xs:simpleType name="recordIdType">
        <xs:restriction base="xs:token">
            <xs:pattern
                value="((AF|AX|AL|DZ|AS|AD|AO|AI|AQ|AG|AR|AM|AW|AU|AT|AZ|BS|BH|BD|BB|BY|BE|BZ|BJ|BM|BT|BO|BA|BW|BV|BR|IO|BN|BG|BF|BI|KH|CM|CA|CV|KY|CF|TD|CL|CN|
                CX|CC|CO|KM|CG|CD|CK|CR|CI|HR|CU|CY|CZ|DK|DJ|DM|DO|EC|EG|SV|GQ|ER|EE|ET|FK|FO|FJ|FI|FR|GF|PF|TF|GA|GM|GE|DE|GH|GI|GR|GL|GD|GP|GU|GT|GN|GW|GY|HT|
                HM|VA|HN|HK|HU|IS|IN|ID|IR|IQ|IE|IL|IT|JM|JP|JO|KZ|KE|KI|KP|KR|KW|KG|LA|LV|LB|LS|LR|LY|LI|LT|LU|MO|MK|MG|MW|MY|MV|ML|MT|MH|MQ|MR|MU|YT|MX|FM|MD|
                MC|MN|MS|MA|MZ|MM|NA|NR|NP|NL|AN|NC|NZ|NI|NE|NG|NU|NF|MP|NO|OM|PK|PW|PS|PA|PG|PY|PE|PH|PN|PL|PT|PR|QA|RE|RO|RU|RW|SH|KN|LC|PM|VC|WS|SM|ST|SA|SN|
                CS|SC|SL|SG|SK|SI|SB|SO|ZA|GS|ES|LK|SD|SR|SJ|SZ|SE|CH|SY|TW|TJ|TZ|TH|TL|TG|TK|TO|TT|TN|TR|TM|TC|TV|UG|UA|AE|GB|US|UM|UY|UZ|VU|VE|VN|VG|VI|WF|EH|
                YE|ZM|ZW|RS|ME|EU|EUR|IM|XX)|([a-zA-Z]{1})|([a-zA-Z]{3,4}))(-[a-zA-Z0-9:/\-]{1,11})"/>
        </xs:restriction>
    </xs:simpleType> -->
    
    <!-- EAC-CPF will change the element's content definition from NMTOKEN to the more open [text]. Maybe this could be considered, too, for EAG 3.0, though 
         we might still want to keep the stricter approach for a future apeEAG? -->
    <xs:complexType name="recordId">
        <xs:simpleContent>
            <!-- <xs:extension base="recordIdType"> -->
            <xs:extension base="xs:string">    
                <!-- Added -->
                <xs:attributeGroup ref="common"/>
                <xs:attributeGroup ref="vocabulary"/>
                <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"), though EAC-CPF has taken the 
                     decision to not have these within "control". For EAG, however, the existing "source" attributes rather are meant to link to "sources"
                     while only marginally pointing to vocabularies etc. -->
                <xs:attributeGroup ref="references"/>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>

    <xs:complexType name="otherRecordId">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <!-- Added -->
                <xs:attributeGroup ref="common"/>
                <xs:attribute name="localType" type="xs:anyURI"/>
                <xs:attributeGroup ref="vocabulary"/>
                <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"), though EAC-CPF has taken the 
                     decision to not have these within "control". For EAG, however, the existing "source" attributes rather are meant to link to "sources"
                     while only marginally pointing to vocabularies etc. -->
                <xs:attributeGroup ref="references"/>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>

    <!-- It seems superfluous to define an attribute group with only on attribute, especially if that attribute is referenced independently as well. -->
    <!-- <xs:attributeGroup name="localType">
        <xs:attribute name="localType" type="xs:anyURI"/>
    </xs:attributeGroup> -->
    
    <!-- Added -->
    <xs:complexType name="representation" mixed="true">
       <xs:attributeGroup ref="common"/>
       <xs:attributeGroup ref="link"/>
       <xs:attribute name="localType" type="xs:anyURI"/>
    </xs:complexType>

    <!-- EAC-CPF intends to follow EAD3 in using the attribute "value" for the variations of "maintenanceStatus", simultaneously removing the option to 
         have content in the element or to have them repeatable. The same would apply to "publicationStatus", "agentType" and "eventType". --> 
    <xs:complexType name="maintenanceStatus">
        <xs:attribute name="value" use="required">
           <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="revised"/>
                 <xs:enumeration value="deleted"/>
                 <xs:enumeration value="new"/>
                 <xs:enumeration value="deletedSplit"/>
                 <xs:enumeration value="deletedMerged"/>
                 <xs:enumeration value="deletedReplaced"/>
                 <xs:enumeration value="cancelled"/>
                 <xs:enumeration value="derived"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
        <!-- Added -->
        <xs:attributeGroup ref="common.empty"/>
        <!-- <xs:simpleContent>
            <xs:restriction base="xs:anyType">
                <xs:simpleType>
                    <xs:restriction base="xs:token">
                        <xs:enumeration value="cancelled"/>
                        <xs:enumeration value="deleted"/>
                        <xs:enumeration value="deletedMerged"/>
                        <xs:enumeration value="deletedReplaced"/>
                        <xs:enumeration value="deletedSplit"/>
                        <xs:enumeration value="derived"/>
                        <xs:enumeration value="new"/>
                        <xs:enumeration value="revised"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:restriction>
        </xs:simpleContent> -->
    </xs:complexType>

    <xs:complexType name="publicationStatus">
        <xs:attribute name="value" use="required">
           <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="inProcess"/>
                 <xs:enumeration value="approved"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
        <!-- Added -->
        <xs:attributeGroup ref="common.empty"/>
        <!-- <xs:simpleContent>
            <xs:restriction base="xs:anyType">
                <xs:simpleType>
                    <xs:restriction base="xs:token">
                        <xs:enumeration value="inProcess"/>
                        <xs:enumeration value="approved"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:restriction>
        </xs:simpleContent> -->
    </xs:complexType>

    <xs:complexType name="maintenanceAgency">
        <xs:sequence>
            <!-- EAC-CPF and EAD3 both have "agencyCode" as optional. Could be changed in EAG 3.0, too, but kept as mandatory in a future apeEAG if necessary? --> 
            <xs:element name="agencyCode" type="agencyCode" minOccurs="0"/>
            <!-- EAC-CPF and EAD3 both have "agencyName" as repeatable. Could be changed in EAG 3.0, too, but kept as non-repeatable in a future apeEAG if necessary? --> 
            <xs:element name="agencyName" type="agencyName" maxOccurs="unbounded"/>
            <xs:element name="otherAgencyCode" type="otherAgencyCode" minOccurs="0"
                maxOccurs="unbounded"/>
            <xs:element name="descriptiveNote" type="descriptiveNote" minOccurs="0"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <!-- Added -->
        <xs:attribute name="countryCode" type="xs:NMTOKEN"/>
        <!-- Note: with "placeEntry" there is a more detailed - i.e. restrictive - definition of "countryCode", which probably is due to EAC-CPF not using Schematron
             in the current version. This will be changed in the new version, so maybe we could keep "countryCode" with the more general schema definition for EAG as well? -->
    </xs:complexType>

    <xs:complexType name="agencyCode" mixed="true">
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"), though EAC-CPF has taken the 
             decision to not have these within "control". For EAG, however, the existing "source" attributes rather are meant to link to "sources"
             while only seldomnly pointing to vocabularies etc. -->
        <xs:attributeGroup ref="references"/>
        <!-- EAC-CPF suggests to use the new attribitue "status" with values "authorized" and "alternative" to indicate if an agency identifier is offically
             registered, e.g. ISIL, and thereby (globally) unique or merely self-assigned. -->
        <xs:attribute name="status">
            <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="authorized"/>
                 <xs:enumeration value="alternative"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
    </xs:complexType>

    <xs:complexType name="agencyName" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"), though EAC-CPF has taken the 
             decision to not have these within "control". For EAG, however, the existing "source" attributes rather are meant to link to "sources"
             while only seldomnly pointing to vocabularies etc. -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="otherAgencyCode" mixed="true">
        <!-- <xs:attributeGroup ref="localType"/> -->
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <xs:attribute name="localType" type="xs:anyURI"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"), though EAC-CPF has taken the 
             decision to not have these within "control". For EAG, however, the existing "source" attributes rather are meant to link to "sources"
             while only seldomnly pointing to vocabularies etc. -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="descriptiveNote">
        <xs:sequence>
            <xs:element name="p" type="p" maxOccurs="unbounded"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="p" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

   <!-- <xs:complexType name="languageDeclarations">
        <xs:sequence>
            <xs:element name="languageDeclaration" type="languageDeclaration" maxOccurs="unbounded"
            />
        </xs:sequence>
    </xs:complexType> -->

    <!-- EAC-CPF will move the attributes for the language and the script codes directly into "languageDeclaration", thereby removing the sub-elements
         "language" and "script". In EAG, this would lead to completely removing these two elements as they are not used anywhere else. -->
    <xs:complexType name="languageDeclaration">
        <xs:sequence>
            <!-- <xs:element name="language" type="language"/>
            <xs:element name="script" type="script"/> -->
            <xs:element name="descriptiveNote" type="descriptiveNote" minOccurs="0"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <!-- Added -->
        <xs:attribute name="languageCode" type="xs:NMTOKEN" use="required"/>
            <!-- Changed data type in order to be more open according to the possible values of "languageEncoding".
            <xs:simpleType>
                <xs:restriction base="xs:string">
                    <xs:pattern value="[a-z]{3}"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute> -->
        <!-- Added -->
        <xs:attribute name="scriptCode" type="xs:NMTOKEN"/>
            <!-- Changed data type in order to be more open according to the possible values of "languageEncoding".
            <xs:simpleType>
                <xs:restriction base="xs:string">
                    <xs:pattern value="[A-Z][a-z]{3}"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute> -->
    </xs:complexType>

    <!-- <xs:complexType name="language" mixed="true">
        <xs:attribute ref="xml:lang"/>
        <xs:attribute name="languageCode" use="required">
            <xs:simpleType>
                <xs:restriction base="xs:string">
                    <xs:pattern value="[a-z]{3}"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute>
        <xs:attributeGroup ref="sourceAttribute"/>
    </xs:complexType> -->

    <!-- <xs:complexType name="script" mixed="true">
        <xs:attribute ref="xml:lang"/>
        <xs:attributeGroup ref="a.scriptCode"/>
        <xs:attributeGroup ref="sourceAttribute"/>
    </xs:complexType> -->

    <!-- <xs:attributeGroup name="a.scriptCode">
        <xs:attribute name="scriptCode">
            <xs:simpleType>
                <xs:restriction base="xs:string">
                    <xs:pattern value="[A-Z][a-z]{3}"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute>
    </xs:attributeGroup> -->

    <xs:complexType name="conventionDeclaration">
        <xs:sequence>
            <!-- <xs:element name="abbreviation" type="abbreviation" minOccurs="0"/> -->
            <!-- As part of the EAC-CPF revision "abbreviation" will become "shortCode" as a clarification. -->
            <xs:element name="shortCode" type="shortCode" minOccurs="0"/>
            <!-- <xs:element name="citation" type="citation" maxOccurs="unbounded"/> -->
            <!-- As part of the EAC-CPF revision "citation" will become "reference" in order to only use one element for references. -->
            <xs:element name="reference" type="reference" maxOccurs="unbounded"/>
            <xs:element name="descriptiveNote" type="descriptiveNote" minOccurs="0"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="shortCode" mixed="true">
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"), though EAC-CPF has taken the 
             decision to not have these within "control". For EAG, however, the existing "source" attributes rather are meant to link to "sources"
             while only marginally pointing to vocabularies etc. -->
        <xs:attributeGroup ref="references"/>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="reference" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="link"/>
        <!-- Changed from using "href" separately to using the combined group for links. -->
        <xs:attribute name="lastDateTimeVerified" type="m.data.standardDateTime"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"), though EAC-CPF has taken the 
             decision to not have these within "control". For EAG, however, the existing "source" attributes rather are meant to link to "sources"
             while only seldomnly pointing to vocabularies etc. -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="rightsDeclaration">
        <xs:sequence>
            <!-- <xs:element name="abbreviation" type="abbreviation" minOccurs="0"/>
            <xs:element name="citation" type="citation"/> -->
            <xs:element name="shortCode" type="shortCode" minOccurs="0"/>
            <xs:element name="reference" type="reference" maxOccurs="unbounded"/>
            <xs:element name="descriptiveNote" type="descriptiveNote" minOccurs="0"/>
        </xs:sequence>
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <!-- <xs:attributeGroup ref="localType"/> -->
        <xs:attribute name="localType" type="xs:anyURI"/>
    </xs:complexType>

    <xs:complexType name="localTypeDeclaration">
        <xs:sequence>
            <!-- <xs:element name="citation" type="citation"/>
            <xs:element name="abbreviation" type="abbreviation" minOccurs="0"/> -->
            <xs:element name="shortCode" type="shortCode" minOccurs="0"/>
            <xs:element name="reference" type="reference" maxOccurs="unbounded"/>
            <xs:element name="descriptiveNote" type="descriptiveNote" minOccurs="0"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="localControl">
        <xs:sequence>
            <!-- Suggestion to have "term" as mandatory sub-element of "localControl" seeing that this is about providing locally used control terms -->
            <xs:element name="term" type="term" maxOccurs="unbounded"/>
            <xs:choice minOccurs="0">
                <xs:element name="date" type="date"/>
                <xs:element name="dateRange" type="dateRange"/>
            </xs:choice>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <!-- <xs:attributeGroup ref="localType"/> -->
        <xs:attribute name="localType" type="xs:anyURI"/>
    </xs:complexType>

    <!-- Seeing that everyone who uses "term" in APE uses it with the value "extended", there doesn't seem to be enough distinction in this to merit 
         keeping it as predefined in the schema. It might make more sense to free "localControl" up to any use. There is ongoing conversation in TS-EAS 
         at the moment, whether the currently most applied usage of "localControl" could actually be captured better by reintroducing the attribute 
         "detailLevel" (or "levelOfDetail") with either the root element or the main description element. -->
    <!-- Added mixed="true" to enable "term" to have any content. -->
    <xs:complexType name="term" mixed="true">
        <!-- <xs:simpleContent>
            <xs:restriction base="xs:anyType">
                <xs:simpleType>
                    <xs:restriction base="xs:token">
                        <xs:enumeration value="simple"/>
                        <xs:enumeration value="extended"/>
                    </xs:restriction>
                </xs:simpleType> -->
                <!-- <xs:attributeGroup ref="m.entryLanguageAttributes"/> -->
                <xs:attributeGroup ref="common"/>
                <xs:attribute name="lastDateTimeVerified" type="m.data.standardDateTime"/>
                <!-- <xs:attribute name="vocabularySource" type="xs:anyURI"/> -->
                <xs:attributeGroup ref="vocabulary"/>
            <!-- </xs:restriction>
        </xs:simpleContent> -->
    </xs:complexType>

    <!-- "(xml:)lang" and "script" are part of the attribute group "common" already. "transliteration" will be removed from EAC-CPF (and EAD) and it will  be
         recommended to provide the rules of transliteration that have been applied in the EAS instance via "conventionDeclaration" if necessary. Then one could
         point to that declaration via "conventionDeclarationReference". -->
    <!-- <xs:attributeGroup name="m.entryLanguageAttributes">
        <xs:attributeGroup ref="a.scriptCode"/>
        <xs:attribute ref="xml:lang"/>
        <xs:attribute name="transliteration" type="xs:NMTOKEN"/>
    </xs:attributeGroup> -->

    <xs:complexType name="date" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attribute name="localType" type="xs:anyURI"/>
        <xs:attributeGroup ref="m.dateSingle"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:attributeGroup name="m.dateSingle">
        <xs:attribute name="standardDate" type="m.data.standardDate"/>
        <xs:attribute name="notBefore" type="m.data.standardDate"/>
        <xs:attribute name="notAfter" type="m.data.standardDate"/>
        <!-- EAC-CPF will introduce the attribute "certainty" from EAD3 along with the recommendation to use values following EDTF, 
             i.e."uncertain", "approximate", or "uncertain and approximate" -->
        <xs:attribute name="certainty" type="xs:NMTOKEN"/>
        <xs:attribute name="calendar" type="xs:NMTOKEN"/>
        <xs:attribute name="era" type="xs:NMTOKEN"/>
        <!-- EAC-CPF will introduce a new the attribute "status" to indicate a date is "unknown" or "open". EAG so far has had to do this via
             "localType" due to the lack of a dedicated attribute, hence the suggestion would be to follow up on this new addition. -->
        <xs:attribute name="status">
            <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="open"/>
                 <xs:enumeration value="unknown"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
    </xs:attributeGroup>

    <xs:complexType name="dateRange">
        <xs:sequence>
            <xs:element name="fromDate" type="fromDate"/>
            <xs:element name="toDate" type="toDate"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <xs:attribute name="localType" type="xs:anyURI"/>
    </xs:complexType>

    <xs:complexType name="fromDate" mixed="true">
        <xs:attributeGroup ref="m.dateSingle"/>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="toDate" mixed="true">
        <xs:attributeGroup ref="m.dateSingle"/>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <!-- There might be the question if we keep this restriction on any dates further in the future than the end of 2099. -->
    <xs:simpleType name="m.data.standardDate">
        <xs:union>
            <xs:simpleType>
                <xs:restriction base="xs:date">
                    <xs:maxInclusive value="2099-12-31"/>
                </xs:restriction>
            </xs:simpleType>
            <xs:simpleType>
                <xs:restriction base="xs:gYear">
                    <xs:maxInclusive value="2099"/>
                </xs:restriction>
            </xs:simpleType>
            <xs:simpleType>
                <xs:restriction base="xs:gYearMonth">
                    <xs:maxInclusive value="2099-12"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:union>
    </xs:simpleType>

    <xs:complexType name="maintenanceHistory">
        <xs:sequence>
            <xs:element name="maintenanceEvent" type="maintenanceEvent" maxOccurs="unbounded"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="maintenanceEvent">
        <xs:sequence>
            <xs:element name="agent" type="agent"/>
            <xs:element name="agentType" type="agentType"/>
            <xs:element name="eventDateTime" type="eventDateTime"/>
            <xs:element name="eventType" type="eventType"/>
        </xs:sequence>
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="agent" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"), though EAC-CPF has taken the 
             decision to not have these within "control". For EAG, however, the existing "source" attributes rather are meant to link to "sources"
             while only seldomnly pointing to vocabularies etc. -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="agentType">
        <xs:attribute name="value" use="required">
           <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="human"/>
                 <xs:enumeration value="machine"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
        <!-- Added -->
        <xs:attributeGroup ref="common.empty"/>
        <!-- <xs:simpleContent>
            <xs:restriction base="xs:anyType">
                <xs:simpleType>
                    <xs:restriction base="xs:token">
                        <xs:enumeration value="human"/>
                        <xs:enumeration value="machine"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:restriction>
        </xs:simpleContent> -->
    </xs:complexType>

    <xs:complexType name="eventType">
        <xs:attribute name="value" use="required">
           <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="created"/>
                 <xs:enumeration value="revised"/>
                 <xs:enumeration value="deleted"/>
                 <xs:enumeration value="cancelled"/>
                 <xs:enumeration value="derived"/>
                 <xs:enumeration value="updated"/>
                 <xs:enumeration value="published"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
        <!-- Added -->
        <xs:attributeGroup ref="common.empty"/>
        <!-- <xs:simpleContent>
            <xs:restriction base="xs:anyType">
                <xs:simpleType>
                    <xs:restriction base="xs:token">
                        <xs:enumeration value="created"/>
                        <xs:enumeration value="revised"/>
                        <xs:enumeration value="deleted"/>
                        <xs:enumeration value="cancelled"/>
                        <xs:enumeration value="derived"/>
                        <xs:enumeration value="updated"/>
                        <xs:enumeration value="published"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:restriction>
        </xs:simpleContent> -->
    </xs:complexType>

    <xs:complexType name="eventDateTime" mixed="true">
        <xs:attribute name="standardDateTime" type="m.data.standardDateTime"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"), though EAC-CPF has taken the 
             decision to not have these within "control". For EAG, however, the existing "source" attributes rather are meant to link to "sources"
             while only seldomnly pointing to vocabularies etc. -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <!-- There might be the question if we keep this restriction on any dates further in the future than the end of 2099. -->
    <xs:simpleType name="m.data.standardDateTime">
        <xs:union>
            <xs:simpleType>
                <xs:restriction base="xs:date">
                    <xs:maxInclusive value="2099-12-31"/>
                </xs:restriction>
            </xs:simpleType>
            <xs:simpleType>
                <xs:restriction base="xs:gYear">
                    <xs:maxInclusive value="2099"/>
                </xs:restriction>
            </xs:simpleType>
            <xs:simpleType>
                <xs:restriction base="xs:gYearMonth">
                    <xs:maxInclusive value="2099-12"/>
                </xs:restriction>
            </xs:simpleType>
            <xs:simpleType>
                <xs:restriction base="xs:dateTime">
                    <xs:maxInclusive value="2099-12-31T23:59:59"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:union>
    </xs:simpleType>

    <xs:complexType name="sources">
        <xs:sequence>
            <xs:element name="source" type="source" maxOccurs="unbounded"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="source">
        <xs:sequence>
            <xs:element name="sourceEntry" type="sourceEntry" minOccurs="0"/>
            <!-- EAC-CPF has decided to remove the element "objectBinWrap" and it would make sense for EAG to follow. -->
            <!-- <xs:choice minOccurs="0">
                <xs:element name="objectXMLWrap" type="objectXMLWrap"/>
                <xs:element name="objectBinWrap" type="objectBinWrap"/>
            </xs:choice> -->
            <xs:element name="objectXMLWrap" type="objectXMLWrap" minOccurs="0"/>
            <xs:element name="descriptiveNote" type="descriptiveNote" minOccurs="0" />
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <xs:attribute name="lastDateTimeVerified" type="m.data.standardDateTime"/>
        <xs:attributeGroup ref="link"/>
        <!-- Changed from using "href" separately to using the combined group for links. -->
    </xs:complexType>

    <xs:complexType name="sourceEntry" mixed="true">
        <!-- <xs:attributeGroup ref="m.entryLanguageAttributes"/> -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"), though EAC-CPF has taken the 
             decision to not have these within "control". For EAG, however, the existing "source" attributes rather are meant to link to "sources"
             while only seldomnly pointing to vocabularies etc. 
             Should be reviewed as it doesn't seem to make sense to point from a "sourceEntry" to a "source". -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="objectXMLWrap">
        <xs:group ref="e.anyName"/>
    </xs:complexType>

    <!-- <xs:complexType name="objectBinWrap">
        <xs:simpleContent>
            <xs:extension base="xs:base64Binary"> </xs:extension>
        </xs:simpleContent>
    </xs:complexType> -->

    <xs:group name="e.anyName">
        <xs:sequence>
            <xs:any processContents="skip"/>
        </xs:sequence>
    </xs:group>

    <!-- ##################
        ARCHIVAL GUIDE
    ################### -->
    
    <xs:complexType name="archivalGuide">
        <xs:sequence>
            <xs:element name="identity" type="identity"/>
            <!-- Question if we could rename "desc" to "description" in order to avoid abbreviated tag names. Could also foster alignment with 
                 EAC-CPF. There might also be the follow-up question whether the "description" of an archival institution could be more generally 
                 aligned with the description of a corporate body. -->
            <xs:element name="description" type="description"/>
            <xs:element name="relations" type="relations" minOccurs="0"/>
            <!-- Moved "relations" here from "control" in order to be aligned with EAC-CPF and EAD3 in this regard. -->
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="identity">
        <xs:sequence>
            <!-- There might be the question if "repositorId" could be "entityId" more generally, but it might also make sense to keep this 
            more specific element with its additional definition of attributes. Add "y" to have the name "repositoryId" instead of "repositorId". 
            Same for "otherRespositoryId". -->
            <xs:element name="repositoryId" type="repositoryId" minOccurs="0"/>
            <xs:element name="otherRepositoryId" type="otherRepositoryId" minOccurs="0"/>
            <!-- Suggestion to replace the three name elements with "nameEntry". However, it might not necessarily make sense to also add 
            "nameEntrySet" from EAC-CPF in this specific context. -->
            <!-- <xs:element name="autform" type="autform" maxOccurs="unbounded"/>
            <xs:element name="parform" type="parform" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="nonpreform" type="nonpreform" minOccurs="0" maxOccurs="unbounded"/> -->
            <xs:element name="nameEntry" type="nameEntry" maxOccurs="unbounded"/>
            <!-- EAC-CPF has decided to continue using "entityType" as mandatory and not repeatable with the three predefined values "corporateBody", 
            "family", and "person" and to introduce a new element "otherEntityType" to capture and alternative types or translations or specifications 
            of the predefined ones. Could this be an approach for EAG as well? Or are repository types not clear-cut enough? -->
            <xs:element name="repositoryType" type="repositoryType" minOccurs="0" maxOccurs="unbounded"/>
            <!-- Alternative approach could include:
            <xs:element name="repositoryType" type="repositoryType" minOccurs="0"/> or maybe even <xs:element name="repositoryType" type="repositoryType"/>
            and
            <xs:element name="otherRepositoryType" type="otherRepositoryType" minOccurs="0" maxOccurs="unbounded"/> 
            The question with regard to the latter might be if EAG wanted to introduce the concept of "plural" and "singular" elements. Though if this, 
            in this case, were only for the sake of adding a "descriptiveNote" for all "otherRepositoryType"-s it might not be necessary. -->
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="repositoryId">
        <xs:attribute name="countryCode" use="required" type="xs:NMTOKEN"/>
        <xs:attribute name="repositoryCode" type="xs:NMTOKEN"/>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="otherRepositoryId" mixed="true">
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <!-- <xs:complexType name="autform" mixed="true">
        <xs:attribute ref="xml:lang"/>
        <xs:attributeGroup ref="vocabulary"/>
        Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source").
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="parform" mixed="true">
        <xs:attribute ref="xml:lang"/>
        <xs:attributeGroup ref="vocabulary"/>
        Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source").
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="nonpreform" mixed="true">
        <xs:sequence>
            <xs:element name="useDates" type="useDates" minOccurs="0"/>
        </xs:sequence>
        <xs:attribute ref="xml:lang"/>
        <xs:attributeGroup ref="vocabulary"/>
        Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source").
        <xs:attributeGroup ref="references"/>
    </xs:complexType> -->

    <xs:complexType name="nameEntry">
        <xs:sequence>
            <xs:element maxOccurs="unbounded" name="part" type="part"/>
            <xs:element name="useDates" type="useDates" minOccurs="0"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <!-- Added --> 
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Added -->
        <xs:attributeGroup ref="references"/>
        <!-- EAC-CPF has decided to replace the element "authorizedForm" and "alternativeForm" by the new attribute "status" with values "authorized" 
        and "alternative" and to also change from the element "preferredForm" to an atrribute "preferredForm" with values "true" and "false". The use
        of "localType" for "nameEntry" in EAG at the moment would hence become obsolete and "localType" could be kept as free for any value. -->
        <xs:attribute name="status">
            <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="authorized"/>
                 <xs:enumeration value="alternative"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="preferredForm">
            <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="true"/>
                 <xs:enumeration value="false"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="localType" type="xs:anyURI"/>
        <!-- <xs:attribute name="localType">
            <xs:simpleType>
                <xs:restriction base="xs:token">
                    <xs:enumeration value="authorized"/>
                    <xs:enumeration value="alternative"/>
                    <xs:enumeration value="preferred"/>
                    <xs:enumeration value="abbreviation"/>
                    <xs:enumeration value="other"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute> -->
    </xs:complexType>

    <xs:complexType name="part" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <!-- With the change to "nameEntry" being used more generally in EAG, it might make sense to leave the "localType" for "part" 
        free for any value. It could still be considered to define specific values for the use in a future apeEAG, similar to apeEAC-CPF. -->
        <xs:attribute name="localType" type="xs:anyURI"/>
        <!-- <xs:attribute name="localType">
            <xs:simpleType>
                <xs:restriction base="xs:token">
                    <xs:enumeration value="corpname"/>
                    <xs:enumeration value="famname"/>
                    <xs:enumeration value="persname"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute> -->
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="useDates">
        <xs:sequence>
            <xs:group ref="m.dates"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:group name="m.dates">
        <xs:choice>
            <xs:element name="date" type="date"/>
            <xs:element name="dateRange" type="dateRange"/>
            <xs:element name="dateSet" type="dateSet"/>
        </xs:choice>
    </xs:group>

    <xs:complexType name="dateSet">
        <xs:sequence>
            <xs:choice>
                <xs:element name="date" type="date"/>
                <xs:element name="dateRange" type="dateRange"/>
            </xs:choice>
            <xs:choice maxOccurs="unbounded">
                <xs:element name="date" type="date"/>
                <xs:element name="dateRange" type="dateRange"/>
            </xs:choice>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <!-- Adoption of https://github.com/ArchivesPortalEuropeFoundation/EAG2012/issues/33 for "repositoryType". For a future apeEAG, it could be considered
         to use predefined values for "localType" according to the current, potentially adapted values in the element itself. --> 
    
    <xs:complexType name="repositoryType" mixed="true">
        <xs:attributeGroup ref="common"/>
        <xs:attribute name="localType" type="xs:anyURI"/>
        <xs:attributeGroup ref="vocabulary"/>
        <xs:attributeGroup ref="references"/>
    </xs:complexType>
    
    <!-- Alternative solution along the lines of EAC-CPF's "entityType" and "otherEntityType"-s approach
    <xs:complexType name="repositoryType">
       <xs:attribute name="value" use="required">
           <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="National archives"/>
                        <xs:enumeration value="Regional archives"/>
                        <xs:enumeration value="County/local authority archives"/>
                        <xs:enumeration value="Municipal archives"/>
                        <xs:enumeration value="Specialised government archives"/>
                        <xs:enumeration value="Private persons and family archives"/>
                        <xs:enumeration value="Church and religious archives"/>
                        <xs:enumeration value="Business archives"/>
                        <xs:enumeration value="University and research archives"/>
                        <xs:enumeration value="Media archives"/>
                        <xs:enumeration value="Archives of political parties, of popular/labour movement and other non-governmental organisations, associations, agencies and foundations"/>
                        <xs:enumeration value="Specialised non-governmental archives and archives of other cultural (heritage) institutions"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
    </xs:complexType>

    <xs:complexType name="otherRepositoryType" mixed="true">
        <xs:attributeGroup ref="common"/>
        <xs:attribute name="localType" type="xs:anyURI"/>
        <xs:attributeGroup ref="vocabulary"/>
        <xs:attributeGroup ref="references"/>
    </xs:complexType>
    -->    

    <!-- Current definition in EAG2012 
    <xs:complexType name="repositoryType">
        <xs:simpleContent>
            <xs:restriction base="xs:anyType">
                <xs:simpleType>
                    <xs:restriction base="xs:token">
                        <xs:enumeration value="National archives"/>
                        <xs:enumeration value="Regional archives"/>
                        <xs:enumeration value="County/local authority archives"/>
                        <xs:enumeration value="Municipal archives"/>
                        <xs:enumeration value="Specialised government archives"/>
                        <xs:enumeration value="Private persons and family archives"/>
                        <xs:enumeration value="Church and religious archives"/>
                        <xs:enumeration value="Business archives"/>
                        <xs:enumeration value="University and research archives"/>
                        <xs:enumeration value="Media archives"/>
                        <xs:enumeration
                            value="Archives of political parties, of popular/labour movement and other non-governmental organisations, associations, agencies and foundations"/>
                        <xs:enumeration
                            value="Specialised non-governmental archives and archives of other cultural (heritage) institutions"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:restriction>
        </xs:simpleContent>
    </xs:complexType> -->

    <xs:complexType name="description">
        <xs:sequence>
            <xs:element name="repositories" type="repositories"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="repositories">
        <xs:sequence>
            <xs:element name="repository" type="repository" maxOccurs="unbounded"/>
            <xs:element name="image" type="image" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="repository">
        <xs:sequence>
            <xs:element name="repositoryName" type="repositoryName" minOccurs="0" maxOccurs="unbounded"/>
            <!-- With the suggestion to use the attribute "value" instead of having the predefined terms as content of the element, one could 
                 include other language information in the element "repositoryRole" itself. Would we hence want to consider having it as 
                 repeatable? -->
            <xs:element name="repositoryRole" type="repositoryRole" minOccurs="0"/>
            <!-- Suggestion to rename "geogarea" not only to "geogArea" but to "geographicalArea" or maybe actually to "continent" as that is
                 the information we are currently capturing in this element. With the additional suggestion to use the attribute "value" instead 
                 of having the predefined terms as content of the element, one could include other language information in the element "continent" itself.
                 Would we hence want to consider having it as repeatable - or would we not want to risk that someone specifies the "geographicalArea"
                 to be "Europe" and "Antarctica" at the same time? -->
            <xs:element name="geographicalArea" type="geographicalArea"/>
            <xs:element name="location" type="location" maxOccurs="unbounded"/>
            <!-- Might it be make sense to use the already existing element "contact" at this stage as well in order to bundle "telephone" and "email"
                 which are already part of "contact" along with "fax" and "webpage"? And maybe remove "nameEntry" from "contact" seeing that it is not
                 used at all anyway and could hence become more of the main element for the name(s) of the enity being described rather than the name
                 connected to contact information? Would of course work best if we kept all the potential sub-elements as optional, but could also work
                 if e.g. "email" were made mandatory. This would then simply mean that "contact" would need to be mandatory as well. -->
            <xs:element name="contact" type="contact" minOccurs="0" maxOccurs="unbounded"/>
            <!-- <xs:element name="telephone" type="telephone" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="fax" type="fax" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="email" type="email" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="webpage" type="webpage" minOccurs="0" maxOccurs="unbounded"/> -->
            <!-- Suggestion to move "directions" to being an optional sub-element of "location". -->
            <!-- <xs:element name="directions" type="directions" minOccurs="0" maxOccurs="unbounded"/> -->
            <!-- Suggestion to rename "repositorhist" to "repositoryHistory" and to move "repositorfound" (along with a renaming to "foundation")
                 and "repositorsup" (along with a renaming to "suppression") to being sub-elements of "repositoryHistory". Theoretically, the name 
                 "repositoryHistory" could also work in case the repository isn't a corporate body, but rather a person or a family. -->
            <xs:element name="repositoryHistory" type="repositoryHistory" minOccurs="0"/>
            <!-- <xs:element name="repositorfound" type="repositorfound" minOccurs="0"/>
            <xs:element name="repositorsup" type="repositorsup" minOccurs="0"/> -->
            <!-- Suggestion to rename "buildinginfo" to "buildingInformation" -->
            <xs:element name="buildingInformation" type="buildingInformation" minOccurs="0"/>
            <!-- Suggestion to rename "adminhierarchy" to "administrativeStructure" or rather to reuse "structureOrGenealogy" from EAC-CPF. The latter
                 currently allows for "citation", "list", "outline", and "p". In the new version, this is likely going to be "reference", "list" and "p". -->
            <xs:element name="structureOrGenealogy" type="structureOrGenealogy" minOccurs="0"/>
            <xs:element name="holdings" type="holdings" minOccurs="0"/>
            <xs:element name="timetable" type="timetable"/>
            <xs:element name="access" type="access"/>
            <xs:element name="accessibility" type="accessibility" maxOccurs="unbounded"/>
            <xs:element name="services" type="services" minOccurs="0"/>
            <!-- Suggestion to remove this general "catch all" descriptiveNote. Usage in the APE dataset is minimal to non-existent and the content 
                 found in the very few cases available does not seem to have much relevance to the context of the file as a whole. 
            <xs:element name="descriptiveNote" type="descriptiveNote" minOccurs="0"/> -->
            <xs:element name="image" type="image" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="image">
        <xs:attributeGroup ref="link"/>
        <!-- Changed from using "href" and "linkTitle" separately to using the combined group for links. This means that "href" would not be mandatory anymore. 
             However, seeing that one can't use any content with "image", one would assume that inlcuding a link within "href" is the next logical thing to do. 
             -->
        <!-- <xs:attributeGroup ref="localType"/> -->
        <!-- Added -->
        <xs:attributeGroup ref="common.empty"/>
        <xs:attribute name="localType" type="xs:anyURI"/>
    </xs:complexType>
    
    <xs:complexType name="repositoryName" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="repositoryRole" mixed="true">
        <!-- Suggestion to use the attribute "value" for the predefined options rather than having them as content of the element. We could consider 
             keeping the element as [text] so that users could e.g. include their own language/context versions of the roles in the element. -->
        <xs:attribute name="value" use="required">
            <xs:simpleType>
                <xs:restriction base="xs:token">
                    <xs:enumeration value="Branch"/>
                    <xs:enumeration value="Head quarter"/>
                    <xs:enumeration value="Interim archive"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute>
        <!-- <xs:simpleContent>
            <xs:restriction base="xs:anyType">
                <xs:simpleType>
                    <xs:restriction base="xs:token">
                        <xs:enumeration value="Branch"/>
                        <xs:enumeration value="Head quarter"/>
                        <xs:enumeration value="Interim archive"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:restriction>
        </xs:simpleContent> -->
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="geographicalArea" mixed="true">
        <!-- Suggestion to use the attribute "value" for the predefined options rather than having them as content of the element. We could consider 
             keeping the element as [text] so that users could e.g. include their own language versions of the geographical area in the element. -->
        <xs:attribute name="value" use="required">
           <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="Africa"/>
                 <xs:enumeration value="Antarctica"/>
                 <xs:enumeration value="Asia"/>
                 <xs:enumeration value="Australia"/>
                 <xs:enumeration value="Europe"/>
                 <xs:enumeration value="North America"/>
                 <xs:enumeration value="South America"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
        <!-- <xs:simpleContent>
            <xs:restriction base="xs:anyType">
                <xs:simpleType>
                    <xs:restriction base="xs:token">
                        <xs:enumeration value="Africa"/>
                        <xs:enumeration value="Antarctica"/>
                        <xs:enumeration value="Asia"/>
                        <xs:enumeration value="Australia"/>
                        <xs:enumeration value="Europe"/>
                        <xs:enumeration value="North America"/>
                        <xs:enumeration value="South America"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:restriction>
        </xs:simpleContent> -->
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="location">
        <xs:sequence>
            <xs:element name="country" type="country"/>
            <!-- Would we consider renaming "firstdem" to either "region" or "autonomousCommunity" to make it clearer what this element is about? -->
            <xs:element name="region" type="region" minOccurs="0"/>
            <!-- Would we consider renaming "firstdem" to either "county" or "localAuthority" to make it clearer what this element is about? -->
            <xs:element name="county" type="county" minOccurs="0"/>
            <xs:element name="municipalityPostalcode" type="municipalityPostalcode"/>
            <!-- Would we consider renaming "localentity" to either "districtOfTown" or "quarterOfTown" to make it clearer what this element is about? -->
            <xs:element name="districtOfTown" type="districtOfTown" minOccurs="0"/>
            <xs:element name="street" type="street" minOccurs="0"/>
            <!-- Suggestion to incorpoate "directions" here instead of having it directly with "repository" -->
            <xs:element name="directions" type="directions" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <!-- Suggestion to use the new attribute "status" for the predefined terms instead of "localType", which would allow "localType" to be 
             used for actual local information. -->
        <xs:attribute name="status" use="required">
            <xs:simpleType>
                <xs:restriction base="xs:token">
                    <xs:enumeration value="visitors address"/>
                    <xs:enumeration value="postal address"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute>
        <!-- Note: EAC-CPF will adopt the element "geographicCoordinates from EAD3 instead of using attributes for geographic referencing. 
             Might be worth considering this for EAG, too. However, the change in EAC-CPF will be place/geographicCoordinates, i.e. for EAG
             a possible solution could be a new element "place" with sub-elements "location", "geographicCoordinates" and "directions". -->
        <xs:attribute name="longitude" type="xs:NMTOKEN"/>
        <xs:attribute name="latitude" type="xs:NMTOKEN"/>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <xs:attribute name="localType" type="xs:anyURI"/>
    </xs:complexType>

    <xs:complexType name="country" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="region" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="county" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="municipalityPostalcode" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="districtOfTown" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="street" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="directions" mixed="true">
        <xs:sequence>
            <!-- Changed from "citation" to "reference". -->
            <xs:element name="reference" type="reference" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="contact">
        <!-- Suggestion to require one of "telephone", "fax", "email", or "webpage" to be there when "contact" is used. All four sub-elements can 
             then be used repeatedly. -->
        <xs:sequence>
            <xs:choice>
               <xs:element name="telephone" type="telephone"/>
               <!-- Suggestion to add "fax" to "contact" instead of having it as direct sub-element of "repository" -->
               <xs:element name="fax" type="fax"/>
               <xs:element name="email" type="email"/>
               <!-- Suggestion to add "fax" to "contact" instead of having it as direct sub-element of "repository". Or do we see "webpage" as being
                    "location" information (as ISDIAH states in 5.2.1) rather than "contact" information? -->
               <xs:element name="webpage" type="webpage"/>
               <!-- Suggestion to remove "nameEntry" due to not being used for "contact" information -->
               <!-- <xs:element name="nameEntry" type="nameEntry" minOccurs="0" maxOccurs="unbounded"/> -->
            </xs:choice>
            <xs:choice maxOccurs="unbounded">
               <xs:element name="telephone" type="telephone"/>
               <xs:element name="fax" type="fax"/>
               <xs:element name="email" type="email"/>
               <xs:element name="webpage" type="webpage"/>
            </xs:choice>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="telephone" mixed="true">
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="fax" mixed="true">
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="email" mixed="true">
        <xs:attributeGroup ref="link"/>
        <!-- Changed from using "href" separately to using the combined group for links. -->
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="webpage" mixed="true">
        <xs:attributeGroup ref="link"/>
        <!-- Changed from using "href" separately to using the combined group for links. -->
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="repositoryHistory">
        <!-- Suggestion to have all sub-elements as repeatable. Suggestion to require one of "descriptiveNote", "list", "foundation", or "suppression" 
             to be used when "repositoryHistory" is used. All four sub-elements can then be used repeatedly. -->
        <xs:sequence>
            <xs:choice>
               <xs:element name="descriptiveNote" type="descriptiveNote"/>
               <xs:element name="list" type="list"/>
               <xs:element name="foundation" type="foundation"/>
               <xs:element name="suppression" type="suppression"/>
            </xs:choice>
            <xs:choice maxOccurs="unbounded">
               <xs:element name="descriptiveNote" type="descriptiveNote"/>
               <xs:element name="list" type="list"/>
               <xs:element name="foundation" type="foundation"/>
               <xs:element name="suppression" type="suppression"/>
            </xs:choice>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="list">
       <xs:sequence>
          <xs:element maxOccurs="unbounded" name="item" type="item"/>
       </xs:sequence>
       <xs:attributeGroup ref="common"/>
       <xs:attribute name="localType" type="xs:anyURI"/>
    </xs:complexType>

    <xs:complexType name="item" mixed="true">
       <xs:attributeGroup ref="common"/>
       <xs:attribute name="localType" type="xs:anyURI"/>
    </xs:complexType>

    <xs:complexType name="foundation">
        <xs:sequence>
            <xs:element name="date" type="date"/>
            <xs:element name="rule" type="rule" maxOccurs="unbounded"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="rule" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="suppression">
        <xs:sequence>
            <xs:element name="date" type="date"/>
            <xs:element name="rule" type="rule" maxOccurs="unbounded"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="buildingInformation">
        <!-- Suggestion to have all sub-elements as repeatable. Suggestion to have "building" as a general description element mandatory when using 
             "buildingInformation". Seems to be the most often used option in this context. -->
        <xs:sequence>
            <xs:element name="building" type="building" maxOccurs="unbounded"/>
            <xs:element name="repositorarea" type="repositorarea" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="lengthshelf" type="lengthshelf" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="building">
        <xs:sequence>
            <xs:element name="descriptiveNote" type="descriptiveNote"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="repositorarea">
        <xs:sequence>
            <xs:element name="num" type="num"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="lengthshelf">
        <xs:sequence>
            <xs:element name="num" type="num"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="num" mixed="true">
        <xs:attribute name="unit" use="required">
            <xs:simpleType>
                <xs:restriction base="xs:token">
                    <xs:enumeration value="squaremetre"/>
                    <xs:enumeration value="linearmetre"/>
                    <xs:enumeration value="site"/>
                    <xs:enumeration value="book"/>
                    <xs:enumeration value="title"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="structureOrGenealogy">
        <!-- Suggestion to require one of "p", "list", or "reference" to be there when "structureOrGenealogy" is used. All three sub-elements can 
             then be used repeatedly. -->
        <xs:sequence>
           <xs:choice>
              <xs:element name="p" type="p"/>
              <xs:element name="list" type="list"/>
              <xs:element name="reference" type="reference"/>
           </xs:choice>
           <xs:choice maxOccurs="unbounded">
              <xs:element name="p" type="p"/>
              <xs:element name="list" type="list"/>
              <xs:element name="reference" type="reference"/>
            </xs:choice>
        </xs:sequence>
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <!-- Suggestion to replace "adminunit" with either repeated "p" or "list/item" in "structureOrGenealogy". Note: it is yet to be decided how
         the use of "list" and "item" will be aligned between EAC-CPF and EAD, so the definition of both elements as in this draft only shows the 
         most simple approach.
    <xs:complexType name="adminunit" mixed="true">
        <xs:attribute ref="xml:lang"/>
        <xs:attributeGroup ref="vocabulary"/>
        Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source").
        <xs:attributeGroup ref="references"/>
    </xs:complexType> -->

    <xs:complexType name="holdings">
        <!-- Suggestion to require one of "descriptiveNote", "list", "extent", set of date elements, or set of controlled access terms to be there 
             when "holdings" is used. All five sub-elements (or sub-element groups) can then be used repeatedly. -->
        <xs:sequence>
            <xs:choice>
               <xs:element name="descriptiveNote" type="descriptiveNote"/>
               <xs:element name="list" type="list"/>
               <xs:group ref="m.dates"/>
               <xs:element name="extent" type="extent"/>
               <!-- Suggestion to remove "actingMaintenanceForGroup" seeing that it is not used at all in Archives Portal Europe (and the assumption
                    would be that it's neither used in other contexts given that those rarely have expanded on the usage in APE). Furthermore, the 
                    intent of "actingMaintenanceForGroup", i.e. to provide the "names and locations of other repositories, where the institution 
                    described acts as custodian for their documents, ie is responsible for the documents' care and control", could also be reached
                    via the newly added controlled access terms option, using "corporateName" and "placeName".
               <xs:element name="actingMaintenanceForGroup" type="actingMaintenanceForGroup" minOccurs="0" maxOccurs="unbounded"/> -->
               <xs:group ref="m.controlledAccess"/>
            </xs:choice>
            <xs:choice maxOccurs="unbounded">
               <xs:element name="descriptiveNote" type="descriptiveNote"/>
               <xs:element name="list" type="list"/>
               <xs:group ref="m.dates"/>
               <xs:element name="extent" type="extent"/>
               <xs:group ref="m.controlledAccess"/> 
            </xs:choice>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="extent">
        <xs:sequence>
            <xs:element name="num" type="num"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>
    
    <xs:group name="m.controlledAccess">
        <xs:choice>
            <xs:element name="corporateName" type="corporateName"/>
            <xs:element name="familyName" type="familyName"/>
            <xs:element name="personalName" type="personalName"/>
            <xs:element name="placeName" type="placeName"/>
            <xs:element name="genericName" type="genericName"/>
            <xs:element name="subject" type="subject"/>
            <xs:element name="genreOrForm" type="genreOrForm"/>
        </xs:choice>
    </xs:group>
    
    <xs:complexType name="corporateName">
        <xs:sequence>
            <xs:element name="part" type="part"/>
        </xs:sequence>
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="references"/>
        <xs:attributeGroup ref="vocabulary"/>
        <xs:attribute name="lastDateTimeVerified" type="m.data.standardDateTime"/>
    </xs:complexType>

    <xs:complexType name="familyName">
        <xs:sequence>
            <xs:element name="part" type="part"/>
        </xs:sequence>
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="references"/>
        <xs:attributeGroup ref="vocabulary"/>
        <xs:attribute name="lastDateTimeVerified" type="m.data.standardDateTime"/>
    </xs:complexType>

    <xs:complexType name="personalName">
        <xs:sequence>
            <xs:element name="part" type="part"/>
        </xs:sequence>
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="references"/>
        <xs:attributeGroup ref="vocabulary"/>
        <xs:attribute name="lastDateTimeVerified" type="m.data.standardDateTime"/>
    </xs:complexType>

    <xs:complexType name="placeName">
        <xs:sequence>
            <xs:element name="part" type="part"/>
        </xs:sequence>
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="references"/>
        <xs:attributeGroup ref="vocabulary"/>
        <xs:attribute name="lastDateTimeVerified" type="m.data.standardDateTime"/>
        <xs:attribute name="longitude" type="xs:NMTOKEN"/>
        <xs:attribute name="latitude" type="xs:NMTOKEN"/>
    </xs:complexType>

    <xs:complexType name="genericName">
        <xs:sequence>
            <xs:element name="part" type="part"/>
        </xs:sequence>
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="references"/>
        <xs:attributeGroup ref="vocabulary"/>
        <xs:attribute name="lastDateTimeVerified" type="m.data.standardDateTime"/>
    </xs:complexType>

    <xs:complexType name="subject">
        <xs:sequence>
            <xs:element name="part" type="part"/>
        </xs:sequence>
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="references"/>
        <xs:attributeGroup ref="vocabulary"/>
        <xs:attribute name="lastDateTimeVerified" type="m.data.standardDateTime"/>
    </xs:complexType>

    <xs:complexType name="genreOrForm">
        <xs:sequence>
            <xs:element name="part" type="part"/>
        </xs:sequence>
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="references"/>
        <xs:attributeGroup ref="vocabulary"/>
        <xs:attribute name="lastDateTimeVerified" type="m.data.standardDateTime"/>
    </xs:complexType>

    <!-- <xs:complexType name="actingMaintenanceForGroup">
        <xs:sequence>
            <xs:element name="actingMaintenanceFor" type="actingMaintenanceFor" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="actingMaintenanceFor">
        <xs:sequence>
            <xs:element name="nameEntry" type="nameEntry" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="placeEntry" type="placeEntry" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType> 

    <xs:complexType name="placeEntry" mixed="true">
        <xs:attributeGroup ref="m.entryLanguageAttributes"/>
        <xs:attributeGroup ref="sourceAttribute"/>
        <xs:attribute name="accuracy" type="xs:NMTOKEN"/>
        <xs:attribute name="altitude" type="xs:NMTOKEN"/>
        <xs:attribute name="countryCode">
            <xs:simpleType>
                <xs:union>
                    <xs:simpleType>
                        <xs:restriction base="xs:string">
                            <xs:pattern value="[A-Z]{2}"/>
                        </xs:restriction>
                    </xs:simpleType>
                    <xs:simpleType>
                        <xs:restriction base="xs:string">
                            <xs:pattern value="[A-Z]{4}"/>
                        </xs:restriction>
                    </xs:simpleType>
                </xs:union>
            </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="latitude" type="xs:NMTOKEN"/>
        <xs:attribute name="localType" type="xs:anyURI"/>
        <xs:attribute name="longitude" type="xs:NMTOKEN"/>
        <xs:attribute name="vocabularySource" type="xs:anyURI"/>
    </xs:complexType> -->

    <xs:complexType name="timetable">
        <xs:sequence>
            <xs:element name="opening" type="opening" maxOccurs="unbounded"/>
            <xs:element name="closing" type="closing" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>
    
    <xs:complexType name="opening" mixed="true">
        <xs:attributeGroup ref="link"/>
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="closing" mixed="true">
        <!-- Suggestion to have both sub-elements of "timetable" follow the same model, here: adding attribute group "link" -->
        <xs:attributeGroup ref="link"/>
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <!-- Suggestion to remove "standardDate" as it is (1) not used at all in the APE dataset and (2) very unlikely that an institution
             would provide one detailed date in "closing"
        <xs:attribute name="standardDate" type="m.data.standardDate"/> -->
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="access">
        <xs:sequence>
            <!-- Suggestion to rename "restaccess" to "accessRestrictions" or maybe rather "accessConditions" to be clearer about the 
                 purpose of this element -->
            <xs:element name="accessConditions" type="accessConditions" minOccurs="0" maxOccurs="unbounded"/>
            <!-- Suggestion to rename "termsOfUse" to "useConditions" to be clearer about the broader scope of this element -->
            <xs:element name="useConditions" type="useConditions" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attributeGroup ref="question"/>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:attributeGroup name="question">
        <xs:attribute name="question" use="required">
            <xs:simpleType>
                <xs:restriction base="xs:token">
                    <xs:enumeration value="yes"/>
                    <xs:enumeration value="no"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute>
    </xs:attributeGroup>

    <xs:complexType name="accessConditions" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="link"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="useConditions" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="link"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="accessibility" mixed="true">
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="question"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="services">
        <!-- Suggestion to require one of "searchroom", "library", "internetAccess", "technicalServices", or "recreationalServices" to be there when 
             "services" is used. All five sub-elements can then be used repeatedly. -->
        <xs:sequence>
            <xs:choice>
               <xs:element name="searchroom" type="searchroom"/>
               <xs:element name="library" type="library"/>
               <xs:element name="internetAccess" type="internetAccess"/>
               <!-- Suggestion to rename "techservices" to "technicalServices" --> 
               <xs:element name="technicalServices" type="technicalServices"/>
               <xs:element name="recreationalServices" type="recreationalServices"/>
            </xs:choice>
            <xs:choice maxOccurs="unbounded">
               <xs:element name="searchroom" type="searchroom"/>
               <xs:element name="library" type="library"/>
               <xs:element name="internetAccess" type="internetAccess"/>
               <xs:element name="technicalServices" type="technicalServices"/>
               <xs:element name="recreationalServices" type="recreationalServices"/>
            </xs:choice>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="searchroom">
        <xs:sequence>
           <!-- Suggestion to require one of potential sub-elements of "searchroom" to be there when 
                "searchroom" is used. All eight sub-elements can then be used repeatedly. -->
           <xs:choice>
              <xs:element name="contact" type="contact"/>
              <xs:element name="workPlaces" type="workPlaces"/>
              <xs:element name="computerPlaces" type="computerPlaces"/>
              <xs:element name="microfilmPlaces" type="microfilmPlaces"/>
              <!-- Suggestion to have "webpage" be part of "contact"
              <xs:element name="webpage" type="webpage" minOccurs="0" maxOccurs="unbounded"/> -->
              <xs:element name="photographAllowance" type="photographAllowance"/>
              <xs:element name="readersTicket" type="readersTicket"/>
              <xs:element name="advancedOrders" type="advancedOrders"/>
              <xs:element name="researchServices" type="researchServices"/>
            </xs:choice>
            <xs:choice maxOccurs="unbounded">
              <xs:element name="contact" type="contact"/>
              <xs:element name="workPlaces" type="workPlaces"/>
              <xs:element name="computerPlaces" type="computerPlaces"/>
              <xs:element name="microfilmPlaces" type="microfilmPlaces"/>
              <xs:element name="photographAllowance" type="photographAllowance"/>
              <xs:element name="readersTicket" type="readersTicket"/>
              <xs:element name="advancedOrders" type="advancedOrders"/>
              <xs:element name="researchServices" type="researchServices"/>
            </xs:choice>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="workPlaces">
        <xs:sequence>
            <xs:element name="num" type="num"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="computerPlaces">
        <xs:sequence>
            <xs:element name="num" type="num"/>
            <xs:element name="descriptiveNote" type="descriptiveNote" minOccurs="0"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="microfilmPlaces">
        <xs:sequence>
            <xs:element name="num" type="num"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="photographAllowance" mixed="true">
        <!-- Suggestion to use the attribute "value" for the predefined options rather than having them as content of the element. We could consider 
             keeping the element as [text] so that users could e.g. include their own language versions of the geographical area in the element. -->
        <xs:attribute name="value" use="required">
           <xs:simpleType>
              <xs:restriction base="xs:token">
                 <xs:enumeration value="depending on the material"/>
                 <xs:enumeration value="no"/>
                 <xs:enumeration value="yes"/>
                 <xs:enumeration value="yes (without flash)"/>
              </xs:restriction>
           </xs:simpleType>
        </xs:attribute>
        <!-- <xs:simpleContent>
            <xs:restriction base="xs:anyType">
                <xs:simpleType>
                    <xs:restriction base="xs:token">
                        <xs:enumeration value="depending on the material"/>
                        <xs:enumeration value="no"/>
                        <xs:enumeration value="yes"/>
                        <xs:enumeration value="yes (without flash)"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:restriction>
        </xs:simpleContent> -->
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="readersTicket" mixed="true">
        <xs:attributeGroup ref="link"/>
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="advancedOrders" mixed="true">
        <xs:attributeGroup ref="link"/>
        <!-- <xs:attribute ref="xml:lang"/> -->
        <!-- Replaced attribute "(xml:)lang" with the attribute "common". -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="researchServices">
        <xs:sequence>
            <xs:element name="descriptiveNote" type="descriptiveNote"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="library">
        <xs:sequence>
            <!-- Suggestion to have "contact" repeatable -->
            <xs:element name="contact" type="contact" minOccurs="0" maxOccurs="unbounded"/>
            <!-- Suggestion to have "webpage" be part of "contact"
            <xs:element name="webpage" type="webpage" minOccurs="0" maxOccurs="unbounded"/> -->
            <!-- Suggestion to rename "monographicpub" to "monographicPublications" -->
            <xs:element name="monographicPublications" type="monographicPublications" minOccurs="0"/>
            <!-- Suggestion to rename "serialpub" to "serialPublications" -->
            <xs:element name="serialPublications" type="serialPublications" minOccurs="0"/>
        </xs:sequence>
        <xs:attributeGroup ref="question"/>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="monographicPublications">
        <xs:sequence>
            <xs:element name="num" type="num"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="serialPublications">
        <xs:sequence>
            <xs:element name="num" type="num"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="internetAccess">
        <xs:sequence>
            <xs:element name="descriptiveNote" type="descriptiveNote" minOccurs="0"/>
        </xs:sequence>
        <xs:attributeGroup ref="question"/>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="technicalServices">
        <xs:sequence>
           <!-- Suggestion to require one of "restorationLaboratory" or "reproductionServices" to be there when 
                 "technicalServices" is used. Both sub-elements can then be used repeatedly. -->
           <xs:choice>
              <!-- Suggestion to rename "restorationlab" to "restorationLaboratory" -->
              <xs:element name="restorationLaboratory" type="restorationLaboratory"/>
              <!-- Suggestion to rename "reproductionser" to "reproductionServices" -->
              <xs:element name="reproductionServices" type="reproductionServices"/>
           </xs:choice>
           <xs:choice maxOccurs="unbounded">
              <xs:element name="restorationLaboratory" type="restorationLaboratory"/>
              <xs:element name="reproductionServices" type="reproductionServices"/>
           </xs:choice> 
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="restorationLaboratory">
        <xs:sequence>
            <xs:element name="descriptiveNote" type="descriptiveNote" minOccurs="0"/>
            <xs:element name="contact" type="contact" minOccurs="0"/>
            <!-- Suggestion to have "webpage" be part of "contact"
            <xs:element name="webpage" type="webpage" minOccurs="0" maxOccurs="unbounded"/> -->
        </xs:sequence>
        <xs:attributeGroup ref="question"/>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="reproductionServices">
        <xs:sequence>
            <xs:element name="descriptiveNote" type="descriptiveNote" minOccurs="0"/>
            <xs:element name="contact" type="contact" minOccurs="0"/>
            <!-- Suggestion to have "webpage" be part of "contact"
            <xs:element name="webpage" type="webpage" minOccurs="0" maxOccurs="unbounded"/> -->
            <!-- Suggestion to rename the four following elements using "Services" instead of "ser" -->
            <xs:element name="microformser" type="microformServices" minOccurs="0"/>
            <xs:element name="photographser" type="photographServices" minOccurs="0"/>
            <xs:element name="digitalser" type="digitalServices" minOccurs="0"/>
            <xs:element name="photocopyser" type="photocopyServices" minOccurs="0"/>
        </xs:sequence>
        <xs:attributeGroup ref="question"/>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="microformServices">
        <xs:attributeGroup ref="question"/>
        <!-- Added -->
        <xs:attributeGroup ref="common.empty"/>
    </xs:complexType>

    <xs:complexType name="photographServices">
        <xs:attributeGroup ref="question"/>
        <!-- Added -->
        <xs:attributeGroup ref="common.empty"/>
    </xs:complexType>

    <xs:complexType name="digitalServices">
        <xs:attributeGroup ref="question"/>
        <!-- Added -->
        <xs:attributeGroup ref="common.empty"/>
    </xs:complexType>

    <xs:complexType name="photocopyServices">
        <xs:attributeGroup ref="question"/>
        <!-- Added -->
        <xs:attributeGroup ref="common.empty"/>
    </xs:complexType>

    <xs:complexType name="recreationalServices">
        <xs:sequence>
           <!-- Suggestion to require one of "refreshment", "exhibition", "toursSessions", or "otherServices" to be there when 
                 "recreationalServices" is used. All four sub-elements can then be used repeatedly. -->
           <xs:choice>
              <xs:element name="refreshment" type="refreshment"/>
              <xs:element name="exhibition" type="exhibition"/>
              <xs:element name="toursSessions" type="toursSessions"/>
              <xs:element name="otherServices" type="otherServices"/>
           </xs:choice>
           <xs:choice maxOccurs="unbounded">
              <xs:element name="refreshment" type="refreshment"/>
              <xs:element name="exhibition" type="exhibition"/>
              <xs:element name="toursSessions" type="toursSessions"/>
              <xs:element name="otherServices" type="otherServices"/>
           </xs:choice>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="refreshment">
        <xs:sequence>
            <xs:element name="descriptiveNote" type="descriptiveNote"/>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="exhibition">
        <xs:sequence>
           <!-- Suggestion to require one of "descriptiveNote" or "webpage" to be there when 
                 "exhibition" is used. Both sub-elements can then be used repeatedly. 
                 "exhibition" along with "toursSessions" and "otherServices" are the only element where "webpage" is currently used as standalone. 
                 Could be kept like this or changed to "contact". -->
           <xs:choice>
              <xs:element name="descriptiveNote" type="descriptiveNote"/>
              <xs:element name="webpage" type="webpage"/>
           </xs:choice>
           <xs:choice maxOccurs="unbounded">
              <xs:element name="descriptiveNote" type="descriptiveNote"/>
              <xs:element name="webpage" type="webpage"/>
           </xs:choice> 
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="toursSessions">
        <xs:sequence>
            <!-- Suggestion to require one of "descriptiveNote" or "webpage" to be there when 
                 "toursSessions" is used. Both sub-elements can then be used repeatedly. 
                 "toursSessions" along with "exhibition" and "otherServices" are the only element where "webpage" is currently used as standalone. 
                 Could be kept like this or changed to "contact". -->
           <xs:choice>
              <xs:element name="descriptiveNote" type="descriptiveNote"/>
              <xs:element name="webpage" type="webpage"/>
           </xs:choice>
           <xs:choice maxOccurs="unbounded">
              <xs:element name="descriptiveNote" type="descriptiveNote"/>
              <xs:element name="webpage" type="webpage"/>
           </xs:choice> 
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>

    <xs:complexType name="otherServices">
        <xs:sequence>
            <!-- Suggestion to require one of "descriptiveNote" or "webpage" to be there when 
                 "otherServices" is used. Both sub-elements can then be used repeatedly. 
                 "otherServices" along with "exhibition" and "toursServices" are the only element where "webpage" is currently used as standalone. 
                 Could be kept like this or changed to "contact". -->
           <xs:choice>
              <xs:element name="descriptiveNote" type="descriptiveNote"/>
              <xs:element name="webpage" type="webpage"/>
           </xs:choice>
           <xs:choice maxOccurs="unbounded">
              <xs:element name="descriptiveNote" type="descriptiveNote"/>
              <xs:element name="webpage" type="webpage"/>
           </xs:choice>
        </xs:sequence>
        <!-- Added -->
        <xs:attributeGroup ref="common"/>
    </xs:complexType>


   <!-- ##################
       RELATIONS
   ################### -->


    <xs:complexType name="relations">
        <xs:sequence>
            <xs:element name="resourceRelation" type="resourceRelation" minOccurs="0"
                maxOccurs="unbounded"/>
            <xs:element name="eagRelation" type="eagRelation" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="resourceRelation">
        <xs:sequence>
            <xs:element name="relationEntry" type="relationEntry" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="descriptiveNote" type="descriptiveNote" minOccurs="0"/>
            <xs:group ref="m.dates" minOccurs="0"/>
            <!-- <xs:element name="objectBinWrap" type="objectBinWrap" minOccurs="0"/> -->
            <xs:element name="objectXMLWrap" type="objectXMLWrap" minOccurs="0"/>
            <xs:element name="placeName" type="placeName" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attribute name="resourceRelationType" use="required">
            <xs:simpleType>
                <xs:restriction base="xs:token">
                    <xs:enumeration value="creatorOf"/>
                    <xs:enumeration value="subjectOf"/>
                    <xs:enumeration value="other"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="lastDateTimeVerified" type="m.data.standardDateTime"/>
        <xs:attributeGroup ref="link"/>
    </xs:complexType>

    <xs:complexType name="relationEntry" mixed="true">
        <xs:attribute name="localType" type="xs:anyURI"/>
        <!-- <xs:attributeGroup ref="m.entryLanguageAttributes"/> -->
        <xs:attributeGroup ref="common"/>
        <xs:attributeGroup ref="vocabulary"/>
        <!-- Changed ref from "sourceAttribute" to "vocabulary". Also added "references" (to link to a "source"). -->
        <xs:attributeGroup ref="references"/>
    </xs:complexType>

    <xs:complexType name="eagRelation">
        <xs:sequence>
            <xs:element name="relationEntry" type="relationEntry" minOccurs="0"
                maxOccurs="unbounded"/>
            <xs:element name="descriptiveNote" type="descriptiveNote" minOccurs="0"/>
            <xs:group ref="m.dates" minOccurs="0"/>
        </xs:sequence>
        <xs:attribute name="eagRelationType" use="required">
            <xs:simpleType>
                <xs:restriction base="xs:token">
                    <xs:enumeration value="hierarchical-child"/>
                    <xs:enumeration value="hierarchical-parent"/>
                    <xs:enumeration value="temporal-earlier"/>
                    <xs:enumeration value="temporal-later"/>
                    <xs:enumeration value="associative"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="lastDateTimeVerified" type="m.data.standardDateTime"/>
        <xs:attributeGroup ref="link"/>
    </xs:complexType>

    <!-- <xs:attributeGroup name="sourceAttribute">
        <xs:attribute name="source" type="xs:anyURI"/>
    </xs:attributeGroup> -->

</xs:schema>
